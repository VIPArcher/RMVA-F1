<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>RGSS 规格</title>
<link href="../style.css" type="text/css" rel="stylesheet">
</head>
<body>
<H1>RGSS 规格</H1>
<UL>
  <LI><A href="#whats_new">RGSS3 的新功能</A>
  <LI><A href="#game_run">开始游戏</A>
  <LI><A href="#game_ini">Game.ini</A>
  <LI><A href="#rgss_rtp">RGSS-RTP</A>
  <UL>
    <LI><A href="#rgss_rtp_install">安装数据</A> </LI></UL>
  <LI><A href="#encryption_archive">加密档案</A>
  <LI><A href="#others">其他</A>
  <UL>
    <LI><A href="#ext_lib">扩展库</A>
    <LI><A href="#character_code">字符集</A>
    <LI><A href="#property">属性</A> </LI></UL></LI></UL>
<H2><A name=whats_new>RGSS3 的新功能</A><SPAN class=rgss3>(RGSS3)</SPAN></H2>
<P>RGSS3 是内置于 RPG Maker VX Ace 的一套脚本系统， 和 RMVX 中的 RGSS2
比起来有一些的不同之处，主要的变化如下：</P>
<UL>
  <LI>程序建立在 Ruby 1.9.2 的基础之上。Ruby 1.9 有了很多方面的改良，其中包括运行效率的提高。
  <LI>已经集成了日文和英文的 DLL 支持库。系统会自动判断 Windows 是否为日语环境，在非日语环境下以英语提示信息。
  <LI>对加密档案的算法做出了改进，有效地改善了大型游戏启动时间漫长的弊病。
  <LI>可以控制 F12 按键返回的位置。使用 <A href="g_functions.html#rgss_main">rgss_main</A> 函数。</A>
  <LI><A href="gc_window.html">Window</A> 类可以调整窗口边框和内容之间的空隙了。
  <LI><A href="gc_font.html">Font</A> 类中默认支持了带边缘文字的描绘。
  <LI>允许通过编辑器选项选择是否在测试游戏时开启调试控制台。
  <LI>p 函数可以输出为对话框的功能已经被废除，取而代之的是 <A
  href="g_functions.html#msgbox">msgbox</A> 和 <A
  href="g_functions.html#msgbox_p">msgbox_p</A> 两个函数。
  <LI>支持了 Ogg Theora 影像的播放。使用 <A
  href="gm_graphics.html#play_movie">Graphics.play_movie</A> 方法。
  <LI><A
  href="gm_audio.html">Audio</A> 模块支持了 ogg 格式以及 wav 格式的音频文件从中间开始播放。
  <LI><A href="gm_input.html">Input</A> 模块允许使用符号来指定按钮名称，使记法比以前更加简洁，比如 Input.trigger?(:C)。
  <LI>发生 Syntax Error 的时候，将会在对话框中显示详细信息。 </LI></UL>
<P>除此之外，还有一些小变化留待用户自行探索。</P>
<P>在本文中，所有在 RGSS3 中重新定义的部分都会用此符号进行标注： <SPAN
class=rgss3>(RGSS3)</SPAN></P>
<H2>开始游戏</H2><IMG class=float_r alt="game folder" src="img/folder.png">
<P>一般而言，当你双击 Game.exe（不显示扩展名时为 Game） 文件的时候，RGSS 就会开始执行。而存储该文件的文件夹，通常就被称为「游戏目录」。</P>
<P>正在编辑中的游戏可以通过在菜单中选择[运行]，或者在数据库[敌群]中选择[战斗测试]。此时全局变量 $TEST
的值将会被设置为 true。如果你选择了战斗测试，变量 $BTEST 的值也会被设置为 true。</P>
<P>游戏其他的一些设置则存储于 <A href="#game_ini">Game.ini</A> 这个配置文件当中。</P>
<H2><A name=game_ini>Game.ini</A></H2>
<P>Game.ini 是由编辑器自动创建并更新的，但是它也可以由记事本以及其他文本编辑器直接编辑。</P>
<P>范例：</P><PRE>[Game]
RTP=RPGVXAce
Library=System\RGSS300.dll
Scripts=Data\Scripts.rvdata2
Title=RubyQuest
</PRE>
<DL>
  <DT>
  <DT>RTP
  <DD>
  <P>这是在这个游戏中使用的 <A href="#rgss_rtp">RGSS-RTP</A> 名称，通常是
  "RPGVXAce"。</P>
  <P>如果这个RTP模组没有被安装，那么游戏程序就会报错。</P>
  <DT>Library
  <DD>
  <P>RGSS 所使用的 DLL 名称，通常使用游戏文件夹中 System 文件夹中的副本。<span class="rgss3">(RGSS3)</span></P>
  <DT>Scripts</dt>
  <DD>
  <P>储存脚本的数据文件，指定其在游戏文件夹的相对路径。</P>
  <P>Ruby的脚本通常以 .rb 作为后缀名，但是 RGSS 是使用特殊的方法压缩成一个文件。这个文件通常只能用 RPG Maker VX
Ace 的脚本编辑器进行编辑。其中的数据由多个脚本页构成，按照列表显示的顺序执行。</P>
  <DT>Title
  <DD>
  <P>游戏标题，在游戏窗口的标题栏显示。</P></DD></DL>
<H2><A name=rgss_rtp>RGSS-RTP</A></H2>
<P>RTP (Run-Time
Package)，是用来减少发布游戏文件大小的构件，RTP 包含了许多游戏共享的标准图文件和音乐文件，游戏前安装这些共享文件可以免于重复下载这些文件。</P>
<P>RTP
文件可以使用下列内建游戏库的方法调用，就与调用游戏文件夹下的文件一样。在调用下面的方法时，文件的后缀名（.png、.mid 等）会自动判断，因此可以省略不写。</P>
<P><A href="gc_bitmap.html#new">Bitmap.new</A>, <A
href="gm_audio.html#bgm_play">Audio.bgm_play</A>, <A
href="gm_audio.html#bgs_play">Audio.bgs_play</A>, <A
href="gm_audio.html#me_play">Audio.me_play</A>, <A
href="gm_audio.html#se_play">Audio.se_play</A>, <A
href="gm_graphics.html#transition">Graphics.transition</A></P>
<H3>安装数据</H3>
<P>RPG Maker VX
Ace 中唯一标准的 RTP 就是 "RPGVXAce"，但是你可以使用独立的 RTP。如果你知道如何制作安装包，
那么你就可以遵循以下规则来制作独立的 RTP。</P>
<P>RTP 默认会安装进这个目录： </P><PRE>[CommonFilesFolder]\Enterbrain\RGSS3\[RTPName]
</PRE>这里的 [CommonFilesFolder] 其实就是操作系统中的 Common Files 文件夹，而
[RTPName] 则是 RTP 的名字。比如： <PRE>C:\Program Files\Common Files\Enterbrain\RGSS3\Standard
</PRE>
<P>RTP 安装程序会在注册表的 "HKEY_LOCAL_MACHINE\SOFTWARE\Enterbrain\RGSS3\RTP" 位置新建一个字符串类型的键值（RTP 的名称），在值中设定路径名。在该键下设置的字符串会被 RGSS 判定为 RTP。</P>
<H2>加密档案</H2>
<P>对游戏进行加密，可以在一定程度上防止别人对游戏进行修改/分析。Game.rgss3a 文件中，通常包含所有的数据文件和图像文件（不包含声音文件和字体文件）。你可以在[制作游戏发行包]时选择[生成加密数据文件]来制作加密档案。</P>
<P>对于已经被打包进加密档案中的素材文件，你可通过以下内置函数进行调用，就像调用原文件夹中的文件一样：</P>
<P><A href="g_functions.html#load_data">load_data</A>, <A href="gc_bitmap.html#new">Bitmap.new</A>, <A href="gm_graphics.html#transition">Graphics.transition</A></P>
<P>当程序在游戏目录下检测到加密档案的时候，在 <A href="ata/Local/Temp/RPGVXAce/rgss/rgss.html#game_ini">Game.ini</A> 中的 Scripts 指定的脚本文件（一般是 Data\Scripts.rvdata）一定会直接读取加密档案中的脚本。这个限制是为了防止外部脚本读取到内部文件。</P>
<P>鉴于加密档案的设计初衷，我们不会公布任何关于相关加密算法的信息，请不要试图分析或者破解它。</P>
<H2>其他</H2>
<H3><A name=ext_lib>扩展库</A></H3>
<P>RGSS 无法加载在 C 语言编写的 Ruby 扩展库，因此，我们加载了以下扩展库：</P>
<UL>
  <LI>dl
  <LI>zlib
  <LI>single_byte
  <LI>utf_16_32
  <LI>japanese_sjis
  <LI>Win32API</LI></UL>
<H3><A name=character_code>字符集</A></H3>
<P>RGSS 使用的是 UTF-8 字符编码。UTF-8 是 Unicode 字符编码的一个分支，而 Unicode
字符编码可以支持世界上所有类型文字的显示。</P>
<P>RPG Maker 所输出的脚本数据及其他字符串的编码方式全部为 UTF-8 ，所以不必担心因为字符编码方式不同而产生的冲突。</P>
<H3><A name=property>属性</A></H3>
<P>「属性」是 <A href="g_index.html">游戏库</A> 解说中的用语，它并非 Ruby 语言的概念，而是 RGSS 的用语。</P>
<P>比如，利用下面的代码可以获取和设置一个精灵的坐标（<A href="gc_sprite.html#x">Sprite#x</A>）：</P><PRE>
x = sprite1.x         # 获取
sprite2.x = x + 32    # 设置</PRE>
<P>为了方便起见，这被定义为可通过赋值运算符进行获取（读出）和设置（写入）的方法，就称为属性。</P>
<P><A href="gc_color.html">Color</A> 类、 <A href="gc_tone.html">Tone</A> 类、<A href="gc_rect.html">Rect</A> 类作为属性定义时，所返回的是对象本身的引用，而非对象的副本。因此可以用下面的格式修改字体颜色：</P><PRE>color = font1.color
color.set(255, 0, 0)</PRE>
<H6></H6></BODY></HTML>
